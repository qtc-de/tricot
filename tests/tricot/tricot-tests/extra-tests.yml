tester:
  name: extra
  title: Extra Tests
  description: |-
    'Perfors some additional tests on tricot, not related to plugins
    or validators.'


tests:
  - title: Docker
    description: |-
      'Test tricots docker integration'

    command:
      - tricot
      - ${EXTRA}/Docker.yml

    validators:
      - error: False
      - count:
          values:
            - Success... success
            - Fail... failed
          counts:
            - 2
            - 0
      - contains:
          invert:
            - Fail... success
            - Success... failed


  - title: Env
    description: |-
      'Test tricots environment integration'

    command:
      - tricot
      - ${EXTRA}/Env.yml

    validators:
      - error: False
      - count:
          values:
            - Success... success
            - Fail... failed
          counts:
            - 9
            - 0
      - contains:
          invert:
            - Fail... success
            - Success... failed


  - title: Conditions - Regular
    description: |-
      "Test tricot's condition feature"

    command:
      - tricot
      - ${EXTRA}/Conditionals/Regular/launcher.yml

    validators:
      - status: 12
      - count:
          values:
            - Success... success
            - Failure... failed
            - Skipped... skipped
            - 'Skipping test: Conditionals Skipped'
          counts:
            - 11
            - 1
            - 10
            - 2
      - contains:
          invert:
            - Fail... success
            - Success... failed


  - title: Conditions - Error1
    description: |-
      "Test tricot's condition feature"

    command:
      - tricot
      - ${EXTRA}/Conditionals/Error1/launcher.yml

    validators:
      - status: 16
      - contains:
          values:
            - "Condition 'Test5' was used but never declared within a tester"


  - title: Conditions - Error2
    description: |-
      "Test tricot's condition feature"

    command:
      - tricot
      - ${EXTRA}/Conditionals/Error2/launcher.yml

    validators:
      - status: 16
      - contains:
          values:
            - "Condition 'Test5' was used but never declared within a tester"


  - title: Conditions - Error3
    description: |-
      "Test tricot's condition feature"

    command:
      - tricot
      - ${EXTRA}/Conditionals/Error3/launcher.yml

    validators:
      - status: 16
      - contains:
          values:
            - "Conditions need to be specified as string -> bool pairs"


  - title: Conditions - Error4
    description: |-
      "Test tricot's condition feature"

    command:
      - tricot
      - ${EXTRA}/Conditionals/Error4/launcher.yml

    validators:
      - status: 16
      - contains:
          values:
            - "The keys 'all', 'one_of' and 'none_of' need to be lists"


  - title: Variables
    description: |-
      "Different test on tricot variables"

    command:
      - tricot
      - --variables
      - r_var1="named runtime variable"
      - r_var2="another named runtime variable"
      - --positionals
      - "positional runtime variable"
      - "another positional runtime variable"
      - '--'
      - ${EXTRA}/Variables.yml

    validators:
      - error: False
      - count:
          values:
            - Success... success
            - Fail... failed
          counts:
            - 7
            - 0
      - contains:
          invert:
            - Fail... success
            - Success... failed


  - title: Streams
    description: |-
      "Different test on tricot streams"

    command:
      - tricot
      - ${EXTRA}/Streams.yml

    validators:
      - error: False
      - count:
          values:
            - Success... success
            - Fail... failed
          counts:
            - 4
            - 0
      - contains:
          invert:
            - Fail... success
            - Success... failed
